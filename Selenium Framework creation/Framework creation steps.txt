Prerequisites
Java is installed on the system
Eclipse is installed on the system
Maven is installed on the system

Create a Maven project in Eclipse
add dependencies in pom.xml
directly copy & paste the dependencies in pom.xml from maven repository -->Selenium java or go to the dependencies tab in pom.xml
and give the groupID, artifactID & version, it will get added in pom.xml
The list of dependencies required for creating a basic selenium java framework
Selenium Java
junit
geckodriver

create a folder inside the project called driver and place the drivers inside that
To add gecko driver exe
System.setProperty("webdriver.gecko.driver",” path to gecko driver exe”);
OR
System.setProperty("webdriver.firefox.marionette", “path to gecko driver exe”);
If we are setting the driver path in environment variables --> path, we don't need to use System.setProperty in the code
after setting the path, open cmd and type ChromeDriver.exe and hit enter, the driver should start running successfully

How to add Chrome Driver
Run a test on Chrome browser
System.setProperty("webdriver.chrome.driver",”location of
chromedriver”);
Webdriver driver = new ChromeDriver();

helpful tips
Always check the latest version of chrome driver from https://github.com/SeleniumHQ/selenium/wiki/ChromeDriver

How to add IE Driver
System.setProperty("webdriver.ie.driver",”location of iedriver”);
Webdriver driver = new InternetExplorerDriver();

helpful tips
Always check the latest version of ie driver from https://github.com/SeleniumHQ/selenium/wiki/InternetExplorerDriver
If IE is throwing protected mode settings are not the same for all zones error, open IE-->Settings-->Security
uncheck Enable protected mode under all 4 icons-->apply & close

Use WebDriver Manager for Automatic management of browser drivers for Selenium
Uses : don't need to download drivers.exes for any browser
WebDriverManager.chromedriver().setup();
WebDriverManager.firefoxdriver().setup();
WebDriverManager.operadriver().setup();
WebDriverManager.phantomjs().setup();
WebDriverManager.edgedriver().setup();
WebDriverManager.iedriver().setup();
References
https://github.com/bonigarcia/webdrivermanager

Use the below sample code
WebDriverManager.chromedriver().setup(); or WebDriverManager.chromedriver().version("").setup();
Webdriver driver = new ChromeDriver();

helpful tips
Check your selected locator in different browsers
Can take help of tools for generating xpath and cssSelectors like chropath plugin or xmltoolbox.appspot.com
Can ask developers to provide unique ids to every web element for easy identification and location

Implement POM

A Design Principle where we Create separate Object Repository to store object locators
For each web page there should be a separate page class
The page class will have all object locators and preferably
action methods for the corresponding page

Step 1 :
Create a class for each web page
Step 2 :
Add object locators
Step 3 :
Create class for test
Step 4 :
Refer objects from page classes
Step 5 :
Run and validate

Benefits of POM
=============
Test Objects and Functions are separated for easy
maintenance and keeping the code clean
Objects are kept separated from test scripts and can be
used multiple times in multiple tests
Every unique object locator is created only once
Easy Maintenance and Less Rework

What is TestNG
TestNG is a testing framework for the Java programming
language created by Cédric Beust and inspired by JUnit
and NUnit.
Makes test creation, execution and reporting efficient
Uses annotations like
@BeforeTest, @AfterTest,
@BeforeSuite, @AfterSuite
@BeforeMethod, @AfterMethos
@BeforeClass, @AfterClass
NG = Next Generation

Install TestNG for selenium
help-->Install new software -->Add "https://dl.bintray.com/testng-team/testng-eclipse-release"
the above URL was taken from https://github.com/cbeust/testng-eclipse/
Select Next and finish

Add TestNG libraries
Configure build path --> add libraries --> testng--> finish
Or add maven dependency for TestNG from mvnrepository.com

Advantages of TestNG
Makes test creation, execution and reporting efficient
Helps in Grouping of tests
Helps in Prioritizing of tests
Parallel execution
Reporting

Creating TestNG.xml file
RC on the project --> TestNG --> Convert to TestNG
Use Include/Exclude methods in TestNg xml to Include and Exclude the methods in a class for running

Uses of TestNG.xml
include tests, class, packages etc
exclude tests, class, package etc
set test dependency
set test priorities
pass parameters to test methods
run in parallel

What is Extent Reports | How to use Extent Reports in
Selenium
What is Extent Report
HTML Reporting library
ExtentReports is an open-source reporting API for Java
and .NET. It creates an interactive HTML report of your
test session.
ExtentReports also has a commercial version (Pro)
How to implement ExtentReports in Selenium Java
Step 1 :
Add ExentReports libraries in project
You can add jars or maven dependency
Step 2 :
Create references of ExtentReport func
Step 3 :
Use ExtentReport functions
log, info, pass, fail etc
Step 4 :
Run and Validate

Maven dependency can be copied from ExtentReports.com
To see an example for implementing ExtentReports, go to documentation --> Java --> Examples

What is DesiredCapabilities
A class in Selenium library org.openqa.selenium.remote.DesiredCapabilities
Describes a series of key/value pairs
Used to set properties for browser like BrowserName, Platform, Version etc

What is Log4j
Log4j is a java based logging framework
Is simple, flexible, reliable and fast
Is configured through a configuration file Log4j.xml OR log4j.properties etc...
Practical Example
Step 1:
Add Log4j libraries in the java project
Can add jar files or maven dependency
https://logging.apache.org/log4j/2.x/download.html
Step 2 :
Create reference for Logger in the class
Class where you want to add log statements
Step 3 :
Create log4j.xml or log4j.properties file
Step 4 :
Run and Validate
Log4j - log levels
TRACE
Most detailed information. Expect these to be written to logs only. Since version 1.2.12
DEBUG
Detailed information on the flow through the system.
Expect these to be written to logs only. Generally speaking, most lines logged by your application should be written as DEBUG
INFO
Interesting runtime events (startup/shutdown). Expect these to be immediately visible on a console, so be conservative and keep to a minimum.
WARN
Use of deprecated APIs, poor use of API, 'almost' errors,
other runtime situations that are undesirable or unexpected, but not necessarily "wrong". Expect these to be immediately visible on a status console.
ERROR
Other runtime errors or unexpected conditions. Expect these to be immediately visible on a status console.
FATAL
Severe errors that cause premature termination. Expect these to be immediately visible on a status console.
OFF
The highest possible rank and is intended to turn off logging.
** built-in log levels with increasing order of severity
helpful tips
You can configure to append or overwrite logs in file
You can set logging OFF when not required in case heavy logging is making your runs slower...
Log4j - Configuration File
Log4j is configured through a configuration file
Configuration files can be written in XML, JSON, YAML, or properties file format
Set of key-value pairs. Within a configuration you can define three main components:
Loggers
Appenders
Layouts
Configuring logging via a file has the advantage that logging can be turned on or off without modifying the application that uses Log4j.
Log4j - FAQ
Written in Java | Cross platform
part of the Apache Logging Services
initial release - January a, 2001
Repository - https://github.com/apache/logging-log4j2
Website - https://logging.apache.org/log4j/2.x/
On August 5, 2015 the Apache Logging Services Project
Management Committee announced that Log4j 1 had
reached end of life and that users of Log4j 1 are
recommended to upgrade to Apache Log4j 2.

If the log4j properties ot xml is not configured, only error and fatal logs will be logged.
Configuring properties is much more simpler than Configuring xml
save the properties as log4j2.properties instead of log4j.properties as the former is deprecated
the properties file can be built from scratch by using the springframework guru article
set the log level in properties to trace as it will log all the info
use appender.file.append=true to append logs instead of overwriting
if we want to turn off the logging, logger.file.level=off
priority -- properties>xml

Log4j can be setup in baseclass and called anywhere in the scripts using super
but log4j2 should be declared in each and every class' setup method, since it takes class name as parameter
and it prints classname in front of each and every log for better identification

Exception Handling
Exception - unexpected condition at runtime
Handling any unexpected behavior during execution
Catch the exception and log messages for troubleshooting
Enables continuation of runs even if a test fails

What is a properties file
Properties file is a file with .properties as extension
(e.g config.properties)
Is used in Java (and related technologies) to store
configurable parameters
Parameters as stored as key:value pairs (key=value)
example:
browser=firefox

How to create a properties file
Create a new file inside your java project and name it 
with .properties extension.
example config.properties

How to get data from properties file
Step 1
Create a object of class Properties class
Properties prop = new Properties();
Step 2
Create a object of class InputStream
InputStream input = new FileInputStream("location of
properties file");
Step 3
Load Properties file
prop.load(input);
Step 4
Get values from Properties file
prop.getProperty("browser");
How to set data to properties file
Step 1
Create a object of class Properties class
Properties prop = new Properties();
Step 2
Create a object of class OutputStream
OutputStream output = new FileOutputStream("location of
properties file");
Step 3
Set values
prop.setProperty("result", "pass");
Step 4
Store values in properties file
prop.store(output, "comments");
Helpful Tips
Use # or ! to put comments in properties file

To retrieve the locators of a webpage, we can use katalon extension from chrome webstore
It's like selenium IDE
It provides multiple locators for each and every webelement
https://github.com/Raghav-Pal/SeleniumJavaFramework1

What are Headless Browsers
Headless Browsers are web browsers without a head or GUI (Graphical User
Interface)
i.e. you cannot see anything on your screen, programs runs at backend.
Headless Browsers are software programs that access the web pages but do not
show them to the user.
Headless Chrome
Html Unit Browser
Zombie.js
PhantomJS
TrifleJS
SlimmerJS
Why should we use Headless Browsers
Headless Browsers can be used for :
Running your test on a headless systems like linux os without gui.
When you want simulate multiple browser behaviour on a single machine.
To use minimal resources (because there is no GUI)
Need to run your test just for data creation
When should we NOT use Headless Browsers
Headless Browsers should not/cannot be used:
If you need to visually observe your test on the browser
It does not give you exact feedback of what your customers will actually experience
on your website (Page loading speeds ...etc)
Headless Browsers sometimes may throw errors that is not observed on real
browsers
Examples of Headless Browsers
https://gist.github.com/evandrix/3694955
Helpful Tips
You can use actual browsers on a headless machine
Real browsers can run in headless manner on systems with Linux with zero
configurations. CI systems like Jenkins can be used.
Read about Xvfb - X virtual frame buffer
It is a display server that performs all graphical operations in memory without
showing anything on the screen.
Therefore it does not require the system to have a screen or gui.
HtmlUnit browser can be run with Web Driver and not with Selenium RC.
Selenium RC cannot support headless HtmlUnit browser.

Why to use excel file
In Selenium we can get data from external files like excel
and csv
MS Excel is most commonly used
Helps to make our scripts independent of data handling
Helps to add, update, manage data separately (outside
the framework)
Helps to make our framework data driven
How to add excel libraries
Step 1
Add apache poi libraries
Download and add Jars
from : https://poi.apache.org/download.html
OR
Add maven dependency
From : https://mvnrepository.com/artifact/org.apache.poi/
poi-ooxml
Step 2
Check if the libraries are added in your project
Get Row Count
Step 1
Create excel file and add some data
Step 2
Create references for Workbook
for new excel format (xlsx)
XSSFWorkbook workbook = new XSSFWorkbook(“excel
file location”);
for old excel format (xls)
HSSFWorkbook workbook = new HSSFWorkbook(“excel
file location”);
Step 3
Create references for Worksheet
XSSFSheet sheet = workbook.getSheet(“sheet name”);
Step 4
Call row count function
sheet.getPhysicalNumberOfRows();
Get Cell Data
Step 1
Create references for Workbook
XSSFWorkbook workbook = new XSSFWorkbook(“excel
file location”);
Step 2
Create references for Worksheet
XSSFSheet sheet = workbook.getSheet(“sheet name”);
Step 3
Call function to get cell data
sheet.getRow(rownum).getCell(colnum).getStringCellValu
e();
sheet.getRow(rownum).getCell(colnum).getNumericCellVa
lue();
How to call excel functions
Step 1
In all excel functions get rowNum, colNum as parameters
This is to avoid hard coding of values and get the values
from calling function
Step 2
Create a constructor
A constructor is a special method without any return type
and name same as the class name
Constructor is called every time a class object is created
using the new() keyword
Step 3
Parametrize the constructor
To get excel path and sheet name
Step 4
Create a new class to call excel functions

From mvnrepository download apache poi ooxml (open office xml) - 9 jars will be downloaded
If we don't have MS office in our system, we can use kingsoft (WPS ofice)

How to get test data from excel
Step 1
Create a function to get Row Count
Step 2
Create a function to get Column Count
Step 3
Create a function to get String cell data
Step 4
Create a function to get Numerical cell data
How to create Excel Data Provider function
Step 1
Create a new class ExcelDataProvider
Step 2
Create a function and create object for ExcelUtils
ExcelUtils excel = new ExcelUtils(“excelpath”,
“sheetname”);
Step 3
Get row and column count
int rowCount = excel.getRowCount();
int colCount = excel.getColCount();
Step 4
Run a loop to get all data in an Object Array
How to use testNG @DataProvider
Step 1
Create a function and provide testNG annotation
@DataProvider(name = “testData”)
Step 2
Call the excel data provider function with excel and sheet
name
Step 3
Return the data object
How to get test data from excel
Step 1
Create a function and provide testNG annotation
@Test(dataProvider = “testData”)
Step 2
In the function arguments, get input parameters equal to
the parameters in the excel file
Step 3
Use the values in your test

How to run Selenium tests on Jenkins

Prerequisite
Generate commands to run tests from command line
How to setup Jenkins
Step 1
Download jenkins.war file
https://jenkins.io/download/
Step 2
Run Jenkins
java -jar jenkins.war
java -jar jenkins.war --httpPort=9090
Create job and run Selenium tests
Step 1
Create a new freestyle job
BuildStep -->Execute windows bash command
In Build --> command
switch to the drive in which the project is located 
then type cd and the full path of the project
then type mvn clean test
and then echo success
Apply & save
Then click Build now
We can click on the build and see the logs Always

To trigger jenkins with dev team's build
go to Jobs-->Configure-->Build triggers-->and select the required options 
jenkins-->Manage jenkins -->manage plugin--> Available section --> search for selenium and testng and install the required plugins

To work with testng plugin in jenkins
jenkins-->Manage jenkins -->manage plugin--> Available section --> search for testng results and install the plugin without restart
Now go to Job--> Configure-->build-->post build actions-->publish testng results
In the TestNG XML report pattern box we have to give the path of testng-results xml file which is present in the test-output folder of our project
we can either give the absolute path of the file or General-->Advanced-->use custom workspace and give the path of project -->apply and save
Build now again
click on console output to see the logs
After 2 builds, testng results will start showing graphs

Test results analyzer plugin --> install (search for analyzer)
this will show the run results in a tabular format

Step 2
Add details
Add commands to run Selenium tests
Step 3
Apply and Save
Step 4
Run and validate

How to run TestNG with M1ven Comm1nd Line | How to run Selenium J1v1 tests form comm1nd line

Prerequisite | Java
Java is installed on your system
Eclipse is available
Maven Java project is created in Eclipse
Video links see below
Prerequisite | TestNG
TestNG plugin is added in eclipse
TestNG dependency is added in pom.xml
TestNG tests are created
testng.xml file is created
Video links see below
Prerequisite | Maven
Maven should be available on your system
1 Download maven
2 Add maven to environment variables
Command : mvn -version
How to add maven on Windows | Mac OS
Video links see below
How to run testng from maven command line
Step 1
Add maven surefire plugin in pom.xml
https://maven.apache.org/surefire/maven-surefire-plugin/
Step 2
Provide location of your testng.xml file
(you can provide complete path if facing any issues)
Step 3
Open cmd and goto location of project
Step 4
Run command | mvn clean test
How to provide testng.xml file name at runtime
Step 1
In pom.xml in place of testng.xml file name give a reference
a{fileName}
Step 2
In command add parameter
-DfileName=testng1.xml

What is Visual Validation
Activity to validate the UI appears correctly to the user
Visual validation includes testing UI components for their
Location
Size | Shape
Color
Pixel
Resolution
Fonts | Layouts | Charts
etc...

Create an account in applitools and sign in
Run your first test-->under web sdks select selenium java-->under Prerequisites copy the maven dependency
paste it in pom.xml to download the jar automatically
it will download many dependencies
Go to https://demo.applitools.com or http://demo.applitools.com/index_v2.html# and use them to run tests

Click on my profile icon and get my api key --> pg1h101102ubc106VJHzp5siKtpYmL9f1087vUOU41000IapWWMVg110
follow the instructions in https://applitools.com/tutorials/selenium-java.html
Create a new class in the project and add the sample code provided in the above URL
add Junit4 library to the build path
set the APPLITOOLS_API_KEY in env variables in run as configuration with the one we got from our profile or 
replace System.getenv("APPLITOOLS_API_KEY") with System.getenv(<Api key copied>)

In the class createdRemove the page dimension set in eyes.open
initialize webdriver properly
import the correct junit annotations for before,after and test methods
set page load timeouts and implicit waits for 30 and 20 secs at least'
run the class as Junit test
Refresh the applitools test results page and we should see the test results loaded

It will always pass the first time and load that as the baseline iamge for comparing it with the future runs
Running the same test second time will compare the results of previous run and pass or fail
Now change the URL to http://demo.applitools.com/index_v2.html# and run again
it will throw diffs found exception
The test result will pass but the status will not show as failed, it will show unresolved, since it might be planned changes as well

we can choose the comparison styles like exact,strict,content & layout
The radar will show the differences
Clicking on thumbs up will make the new image as baseline
we can ignore dynamic regions

Allure Reporting
Add Allure jars from maven repository by searching for allure testng
install scoop y going to powershell and iwr -useb get.scoop.sh | iex
set the permission to current user if required
run the tests and Refresh the project workspace
a folder named allure reports will be generated
Install allure from scoop, by going to cmd and scoop install allure
once it's successfully installed, type allure serve <allure reports folder path>
the allure report should open in browser successfully

Allure annotations
Allure supports the below annotations
@Description("")
@Epic("")
@Feature("")
@Story("")
@Step("") 
@Severity(SeverityLevel.abc)

What are Headless Browsers
Headless Browsers are web browsers without a head or GUI (Graphical User Interface)
i.e. you cannot see anything on your screen, programs runs at backend.
Headless Browsers are software programs that access the web pages but do not show them to the user.
Headless Chrome
Html Unit Browser
Zombie.js
PhantomJS
TrifleJS
SlimmerJS
Why should we use Headless Browsers
Headless Browsers can be used for :
Running your test on a headless systems like linux os without gui.
When you want simulate multiple browser behavior on a single machine.
To use minimal resources (because there is no GUI)
Need to run your test just for data creation
When should we NOT use Headless Browsers
Headless Browsers should not/cannot be used:
If you need to visually observe your test on the browser
It does not give you exact feedback of what your customers will actually experience
on your website (Page loading speeds ...etc)
Headless Browsers sometimes may throw errors that is not observed on real
browsers
Examples of Headless Browsers
https://gist.github.com/evandrix/3694955

Helpful Tips
You can use actual browsers on a headless machine
Real browsers can run in headless manner on systems with Linux with zero configurations. CI systems like Jenkins can be used.
Read about Xvfb - X virtual frame buffer
It is a display server that performs all graphical operations in memory without showing anything on the screen.
Therefore it does not require the system to have a screen or gui.
https://en.wikipedia.org/wiki/Xvfb
https://wiki.jenkins-ci.org/display/JENKINS/Xvfb+Plugin
http://stackoverflow.com/questions/31848410/selenium-test-execution-via-jenkinson-linux-machine-without-gui-cli-only-he
HtmlUnit browser can be run with Web Driver and not with Selenium RC.
Selenium RC cannot support headless HtmlUnit browser.

What is Headless Chrome
A headless (non GUI) version of the Chrome Browser
Since ver 59 Chrome supports a headless mode
Available for Linux, MacOS & Windows
(On Windows you should use Chrome ver 60+)
How to use Headless Chrome
ChromeOptions options = new ChromeOptions();
options.addArguments(“headless”)


